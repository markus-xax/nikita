# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –ù–∞—Ç–∏–≤–Ω—ã–π HTTP vs Express

## üîç –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è

### 1. **–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞**

**–ù–∞—Ç–∏–≤–Ω—ã–π HTTP:**
```javascript
const http = require("http");
const server = http.createServer((req, res) => {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
});
server.listen(PORT);
```

**Express:**
```javascript
const express = require("express");
const app = express();
app.listen(PORT);
```

**–†–∞–∑–Ω–∏—Ü–∞:** Express –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç `app`, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –º–∞—Ä—à—Ä—É—Ç–∞–º–∏ –∏ middleware.

---

### 2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤**

**–ù–∞—Ç–∏–≤–Ω—ã–π HTTP:**
```javascript
if (method === "GET" && url === "/status") {
  // –æ–±—Ä–∞–±–æ—Ç–∫–∞
} else if (method === "POST" && url === "/echo") {
  // –æ–±—Ä–∞–±–æ—Ç–∫–∞
}
```
- –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä—è—Ç—å `method` –∏ `url`
- –ú–Ω–æ–≥–æ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö `if/else`
- –°–ª–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å

**Express:**
```javascript
app.get("/status", (req, res) => {
  // –æ–±—Ä–∞–±–æ—Ç–∫–∞
});

app.post("/echo", (req, res) => {
  // –æ–±—Ä–∞–±–æ—Ç–∫–∞
});
```
- –ß–∏—Å—Ç—ã–π –∏ —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥
- –ö–∞–∂–¥—ã–π –º–∞—Ä—à—Ä—É—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

---

### 3. **–ü–∞—Ä—Å–∏–Ω–≥ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ (Body Parsing)**

**–ù–∞—Ç–∏–≤–Ω—ã–π HTTP:**
```javascript
function collectRequestBody(req) {
  return new Promise((resolve, reject) => {
    const chunks = [];
    req.on("data", (chunk) => chunks.push(chunk));
    req.on("end", () => {
      const rawBody = Buffer.concat(chunks).toString();
      try {
        resolve(JSON.parse(rawBody));
      } catch {
        resolve(rawBody);
      }
    });
    req.on("error", reject);
  });
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
const payload = await collectRequestBody(req);
```
- –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Å–æ–±–∏—Ä–∞—Ç—å –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤—Ä—É—á–Ω—É—é
- ~30 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

**Express:**
```javascript
app.use(express.json());

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
const payload = req.body; // –£–∂–µ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω!
```
- –û–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ JSON
- –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

### 4. **–û—Ç–ø—Ä–∞–≤–∫–∞ JSON –æ—Ç–≤–µ—Ç–æ–≤**

**–ù–∞—Ç–∏–≤–Ω—ã–π HTTP:**
```javascript
function sendJson(res, statusCode, data) {
  const body = JSON.stringify(data, null, 2);
  res.writeHead(statusCode, {
    "Content-Type": "application/json; charset=utf-8",
    "Content-Length": Buffer.byteLength(body),
  });
  res.end(body);
  return body; // –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
}
```
- –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏
- –ù—É–∂–Ω–æ –≤—ã—á–∏—Å–ª—è—Ç—å –¥–ª–∏–Ω—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ù—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å `res.end()`

**Express:**
```javascript
res.json({ message: "Hello" });
// –∏–ª–∏
res.status(200).json({ message: "Hello" });
```
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –≤ JSON
- –ë–æ–ª–µ–µ –ª–∞–∫–æ–Ω–∏—á–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

---

### 5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

**–ù–∞—Ç–∏–≤–Ω—ã–π HTTP:**
```javascript
try {
  // –∫–æ–¥
} catch (error) {
  statusCode = 500;
  console.error("–û—à–∏–±–∫–∞:", error);
  responseBody = sendJson(res, statusCode, {
    error: "Internal Server Error",
    message: error.message,
  });
}
```
- –ù—É–∂–Ω–æ –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –º–∞—Ä—à—Ä—É—Ç –≤ try/catch
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

**Express:**
```javascript
app.use((error, req, res, next) => {
  console.error("–û—à–∏–±–∫–∞:", error);
  res.status(500).json({
    error: "Internal Server Error",
    message: error.message,
  });
});
```
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- Middleware –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≤–∏—Ç –æ—à–∏–±–∫–∏ –∏–∑ –≤—Å–µ—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤

---

### 6. **Middleware (–ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û)**

**–ù–∞—Ç–∏–≤–Ω—ã–π HTTP:**
- –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ middleware
- –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –Ω—É–∂–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö

**Express:**
```javascript
app.use(express.json()); // –ü–∞—Ä—Å–∏–Ω–≥ JSON
app.use(cors()); // CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏
app.use(morgan("dev")); // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```
- –ü—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ middleware
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–¥ –º–µ–∂–¥—É –º–∞—Ä—à—Ä—É—Ç–∞–º–∏
- –û–≥—Ä–æ–º–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤—ã—Ö middleware

---

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –§—É–Ω–∫—Ü–∏—è | –ù–∞—Ç–∏–≤–Ω—ã–π HTTP | Express |
|---------|---------------|---------|
| –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ | `http.createServer()` | `express()` |
| –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è | –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ `method` –∏ `url` | `app.get()`, `app.post()` –∏ —Ç.–¥. |
| –ü–∞—Ä—Å–∏–Ω–≥ JSON | –†—É—á–Ω–æ–π –∫–æ–¥ (~30 —Å—Ç—Ä–æ–∫) | `express.json()` (1 —Å—Ç—Ä–æ–∫–∞) |
| –û—Ç–ø—Ä–∞–≤–∫–∞ JSON | –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ | `res.json()` |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ | Try/catch –≤ –∫–∞–∂–¥–æ–º –º–∞—Ä—à—Ä—É—Ç–µ | –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π error handler |
| Middleware | –ù–µ—Ç | –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ |
| –†–∞–∑–º–µ—Ä –∫–æ–¥–∞ | ~100 —Å—Ç—Ä–æ–∫ | ~50 —Å—Ç—Ä–æ–∫ |
| –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ß—É—Ç—å –≤—ã—à–µ (–º–µ–Ω—å—à–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π) | –ß—É—Ç—å –Ω–∏–∂–µ (–Ω–æ —Ä–∞–∑–Ω–∏—Ü–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞) |

---

## üéØ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—Ç–æ?

### –ù–∞—Ç–∏–≤–Ω—ã–π HTTP –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:
- –ò–∑—É—á–µ–Ω–∏—è –æ—Å–Ω–æ–≤ Node.js
- –ü–æ–Ω–∏–º–∞–Ω–∏—è, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º"
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –û—á–µ–Ω—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

### Express –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:
- –†–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- –ë—ã—Å—Ç—Ä–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≥–æ—Ç–æ–≤—ã—Ö middleware
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- –†–∞–±–æ—Ç—ã –≤ –∫–æ–º–∞–Ω–¥–µ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥)

---

## üí° –í—ã–≤–æ–¥—ã

**Express —É–ø—Ä–æ—â–∞–µ—Ç:**
- ‚úÖ –ö–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∫–æ—Ä–æ—á–µ –∏ —á–∏—Ç–∞–±–µ–ª—å–Ω–µ–µ
- ‚úÖ –ú–µ–Ω—å—à–µ boilerplate –∫–æ–¥–∞
- ‚úÖ –õ–µ–≥—á–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –ë–æ–ª—å—à–µ –≥–æ—Ç–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π (middleware)
- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –≤ –∏–Ω–¥—É—Å—Ç—Ä–∏–∏

**–ù–æ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å:**
- Express ‚Äî —ç—Ç–æ –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ –Ω–∞—Ç–∏–≤–Ω—ã–º HTTP
- –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º –≤—Å—ë —Ä–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `http.createServer()`
- –ó–Ω–∞–Ω–∏–µ –æ—Å–Ω–æ–≤ –ø–æ–º–æ–≥–∞–µ—Ç –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞—Ç—å Express

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Express Documentation](https://expressjs.com/)
- [Express Middleware Guide](https://expressjs.com/en/guide/using-middleware.html)
- [Node.js HTTP Module](https://nodejs.org/api/http.html)

